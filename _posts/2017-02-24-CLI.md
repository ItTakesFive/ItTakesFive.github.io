---
layout: post
title:  "CLI的想法及嘗試"
date:   2017-02-24 12:58:03 +0800
categories: jekyll update
---

在 embedded 環境中，通常都以 C 來架構所有的應用，但 C 的天生侷限，使的以 C 實作 CLI 時處理使用者輸入的字串時並不是那麼的方便。

而現今流行的網頁寫法，普遍會以 API 來建構網頁應用，其內容多為 JSON 格式，而在 embedded 中，則以 CGI 來實作特定功能的 API。因大部分的網通產品都會有提供相應的網頁供使用者進行設定，因此，我試著以 web 的 CGI 為基底來建構 CLI，那處理使用者輸入的資料不需再以 C 來實作。

Shell script + JSON processor jq

在這樣的設想下，shell script 是個很不錯的選擇，但原生功能並無法方便處理 JSON 格式的資料，以重用 CGI 的角度切入，我們需要工具從 JSON 中取出特定數值並要有能力對該資料進行更新，最後找到了 jq 這個工具，其透過特定的語法，可達到預想的功能。

這樣一來對應的需求都能滿足了，新架構的 CLI 的運作流程應如下：

1. 透過 cURL 得到相應的資料
2. 解析使用者輸入資訊，並解析對應的 JSON 資料
3. 當使用者確認後，透過 cURL 送出對應的 JSON 資料
